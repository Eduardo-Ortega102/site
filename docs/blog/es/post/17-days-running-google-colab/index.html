<!DOCTYPE html>
<html lang="es" />
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>17 días ejecutando Google Colab &middot; Blog de Eduardo Ortega</title>

    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="https://www.theagilecrafter.com/blog/favicon.ico" />
    <link rel="canonical" href="https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab/" />

     <meta name="description" content="Para mi proyecto de final de grado en la universidad, necesito ejecutar varios experimentos con diferentes modelos de redes neuronales y descargar archivos comp" /> 

     
    
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:image" content="https://www.theagilecrafter.com/blog/img/google-colab.png"/>
    
 
    <meta name="twitter:title" content="17 días ejecutando Google Colab"/>
    <meta name="twitter:description" content="Para mi proyecto de final de grado en la universidad, necesito ejecutar varios experimentos con diferentes modelos de redes neuronales y descargar archivos comp"/>
    <meta name="twitter:url" content="https://www.theagilecrafter.com/es/post/17-days-running-google-colab/" />
    <meta name="twitter:site" content="@duardnaranjo"/>

    <meta property="og:site_name" content="" />
    <meta property="og:title" content="17 días ejecutando Google Colab &middot; Blog de Eduardo Ortega" />
    <meta property="og:url" content="https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab/" />
    

    <meta property="og:type" content="article" />
    <meta property="og:description" content="Para mi proyecto de final de grado en la universidad, necesito ejecutar varios experimentos con diferentes modelos de redes neuronales y descargar archivos comp" />

    <meta property="article:published_time" content="2020-08-12T15:01:11&#43;01:00" />
    

    <meta property="og:image" content="https://www.theagilecrafter.com/blog/img/google-colab.png"/>


    <meta name="generator" content="Hugo 0.55.6" />

    <!-- Stylesheets -->
    <link rel="stylesheet" type="text/css" href="https://www.theagilecrafter.com/blog/built/screen.css" /> 
    <link rel="stylesheet" type="text/css" href="https://www.theagilecrafter.com/blog/css/casper-two.css" /> 
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Lato" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,900&display=swap">
    <link rel="stylesheet" href="https://www.theagilecrafter.com/css/3.7.2.animate.min.css">
    <link rel="stylesheet" href="https://www.theagilecrafter.com/css/fontawesome/css/fontawesome.min.css">
    <link rel="stylesheet" href="https://www.theagilecrafter.com/css/fontawesome/css/brands.min.css">
    <link rel="stylesheet" href="https://www.theagilecrafter.com/css/fontawesome/css/solid.min.css">
     
    <link rel="stylesheet" href="https://www.theagilecrafter.com/blog/css/custom.css" /> 
     
    <link rel="stylesheet" href="https://www.theagilecrafter.com/blog/css/404.css" /> 
    

    
         
    
</head>




<body class="ctsingle">
  
    <div class="site-wrapper">

      <nav id='navigation-bar' class='navigation-bar'>
  <div class='content-wrapper'>
    <div class='main-buttons'>
      <a class='brand navigation-link' href="https://www.theagilecrafter.com/es">Inicio</a>
      <a class='brand navigation-link' href="https://www.theagilecrafter.com/blog/es">Blog</a>
      <a id='menu-switch' href='javascript:void(0);' class='icon' onclick="toggleMenu()">
        <div class='mobile-menu'>
          <div class='horizontal-bar'></div>
          <div class='horizontal-bar margin'></div>
          <div class='horizontal-bar'></div>
        </div>
      </a>
    </div>
    <div class='navigation-content animated fast'>
      <div class='navigation-buttons'>
        <a class='navigation-link' href="https://www.theagilecrafter.com/blog/es/categories/">Categorías</a>
        <a class='navigation-link' href="https://www.theagilecrafter.com/es/#about-me">Sobre Mí</a>
        <a class='navigation-link' href="https://www.theagilecrafter.com/es/#contact">Contacto</a>
        <div class="dropdown" onclick="openLanguageMenu()">
          Idioma
          <i class="fa fa-caret-down"></i>
          <div id="languageDropdown" class="dropdown-content animated fast">
            <a id='es' onclick="changeLanguage('es')" class='language-option'>Español</a>
            <a id='en' onclick="changeLanguage('en')" class='language-option'>English</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</nav>
<div id="progress-bar-container" class="progress-bar-container">
  <div class="progress-bar"></div>
  <span class="progress-bar-title">17 días ejecutando Google Colab</span>
  <div class="social-share-bar">
    <a class="social-share-link twitter"
    onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;"
    href="https://twitter.com/intent/tweet?text=17%20d%c3%adas%20ejecutando%20Google%20Colab&amp;url=https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab&via=duardnaranjo">
    <i class="fab fa-twitter-square"></i>
</a>

<a class="social-share-link facebook"
    onclick="window.open(this.href, 'share-facebook', 'width=550,height=235');return false;"
    href="https://www.facebook.com/sharer/sharer.php?u=https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab">
    <i class="fab fa-facebook-square"></i>
</a>

<a class="social-share-link linkedin"
    onclick="window.open(this.href, 'share-linkedin', 'width=550,height=235');return false;"
    href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab">
    <i class="fab fa-linkedin"></i>
</a>

  </div>
</div>
<header class="site-header outer " 
  style="background-image: url(https://www.theagilecrafter.com/blog/img/cover.jpg)" >
  <script type="text/javascript" src="https://www.theagilecrafter.com/js/functions.js"></script>
  <div class="inner">
    <script>
      var currentLanguage = document.documentElement.lang;
      if (currentLanguage == 'es') {
        document.getElementById('es').classList.add('current-language');
      } else {
        document.getElementById('en').classList.add('current-language');
      }
    </script>
    <div class="site-header-content">
      <h1 class="site-title"> Blog de Eduardo Ortega  </h1>
      <h2 class="site-description">Apuntes de un desarrollador </h2>
      <div class="social-media-links">
        
        <a class="social-link social-link-tw" href="https://twitter.com/duardnaranjo" target="_blank"
          rel="noopener"><i class="fab fa-twitter" aria-hidden="true"></i></a>
        
        
        <a class="social-link" href="https://www.linkedin.com/in/eortegan/es/" target="_blank"
          rel="noopener"><i class="fab fa-linkedin-in" aria-hidden="true"></i></a>
        
        
        <a class="social-link" href="https://github.com/Eduardo-Ortega102" target="_blank" rel="noopener"><i
            class="fab fa-github" aria-hidden="true"></i></a>
        
      </div>
    </div>

    <nav class="site-nav">
      <div class="site-nav-left">
        <ul class="nav" role="menu">
          
          
        </ul>
      </div>
      
    </nav>
  </div>
</header>
      

      <main id="site-main" class="site-main outer" role="main">
        <div class="inner">
          <div class="post-feed">
            <article class="post-card post reading">
  
  <div class="post-card-image" style="background-image: url(https://www.theagilecrafter.com/blog/img/google-colab.png)"></div>
  
  

  <div class="post-card-content">
    <header class="single-post-card-header">
      <h1 class="post-card-title">17 días ejecutando Google Colab</h1>
      
      <span class="post-card-tags">
        
        <a href="https://www.theagilecrafter.com/blog//es/categories/googlecolab">googlecolab</a>
        
        <a href="https://www.theagilecrafter.com/blog//es/categories/python">python</a>
        
        <a href="https://www.theagilecrafter.com/blog//es/categories/machinelearning">machinelearning</a>
        
      </span>
      
      <div class="entry-header">
        <div class="author">
          <a href="https://www.theagilecrafter.com/">
            <img class="author-profile-image"
              src="https://www.theagilecrafter.com/blog/img/avatar.jpg" alt="Author" />
          </a>
          <p>
            Escrito por
            <a href="https://www.theagilecrafter.com/">
              <strong>Eduardo Ortega</strong>
            </a>
          </p>
          <div class="post-date short-date">
            <p>
              <strong>
                
                12
                
                
                ago 2020
              </strong>
            </p>
          </div>
        </div>
        <div class="social-share" style="margin: 0%; border: 0px">
          <a class="social-share-link twitter"
    onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;"
    href="https://twitter.com/intent/tweet?text=17%20d%c3%adas%20ejecutando%20Google%20Colab&amp;url=https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab&via=duardnaranjo">
    <i class="fab fa-twitter-square"></i>
</a>

<a class="social-share-link facebook"
    onclick="window.open(this.href, 'share-facebook', 'width=550,height=235');return false;"
    href="https://www.facebook.com/sharer/sharer.php?u=https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab">
    <i class="fab fa-facebook-square"></i>
</a>

<a class="social-share-link linkedin"
    onclick="window.open(this.href, 'share-linkedin', 'width=550,height=235');return false;"
    href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab">
    <i class="fab fa-linkedin"></i>
</a>

        </div>
      </div>

      <hr style="margin: 0px; margin-top: 16px;">
    </header>
    <section class="post-card-excerpt" style="padding: 0 25px;">
      

<p>Para mi proyecto de final de grado en la universidad, necesito ejecutar varios experimentos con diferentes modelos de redes neuronales y descargar archivos comprimidos con los resultados y los modelos aprendidos, para ello estoy usando un entorno conocido como <em>Google Colaboratory</em> o <em>Google Colab</em>. En total, necesito descargar más de 23.000 archivos.</p>

<p>En los últimos 17 días, he ejecutado con éxito 19.923 experimentos y me he encontrado con ciertos problemas que me han retrasado, <strong>en este post hablaré sobre esos problemas</strong> para que en el futuro no pasen inadvertidos.</p>

<h2 id="tabla-de-contenidos">Tabla de Contenidos</h2>

<ol>
<li>Definiciones</li>
<li>Máquinas Virtuales (Sesiones)</li>
<li>Conexión a Internet</li>
<li>Mostrar Gráficas</li>
<li>Evitar la Pérdida de Datos: Conectar con Google Drive</li>
<li>Carga de Archivos desde Google Drive</li>
</ol>

<h2 id="1-definiciones">1. Definiciones</h2>

<p><strong><em>Google Colaboratory</em></strong>: es un entorno gratuito de <em>Jupyter Notebook</em> que no requiere configuración y que se ejecuta completamente en la nube. Por otro lado, <em>Jupyter Notebook</em> es un entorno interactivo que permite desarrollar código <em>Python</em> de manera dinámica y se ejecuta como una aplicación cliente-servidor.</p>

<p><strong><em>Cuaderno</em></strong>: archivos creados en <em>Colab</em> o <em>Jupyter</em>.</p>

<p><strong><em>Celda</em></strong>: los cuadernos se dividen en pequeños bloques llamados <em>celdas</em>, en ellas se puede ejecutar código <em>Python</em> o renderizar texto usando <em>Markdown</em>.</p>

<h2 id="2-máquinas-virtuales-sesiones">2. Máquinas Virtuales (Sesiones)</h2>

<p><em>Colab</em> usa máquinas virtuales para ejecutar el código del cuaderno en el servidor, dichas máquinas tienen un tiempo de vida máximo de 12 horas. Por lo tanto, cualquier cosa que tarde más de 12 horas en ejecutarse quedará incompleta.</p>

<p>Cada <em>cuenta de Google</em> puede tener como máximo 5 sesiones abiertas simultáneamente, en este contexto, una sesión es una máquina virtual. Este límite puede reducirse con el tiempo, por ejemplo: si encadenas varias ejecuciones de 5 sesiones y 12 horas cada una, acabarás teniendo un límite de una única sesión abierta. Este límite dura aproximadamente 12 horas.</p>

<p>Por este motivo, si necesitas tener 5 sesiones activas siempre, lo mejor es tener una segunda <em>cuenta de Google</em> a la que poder recurrir cuando aparezca la limitación en la primera.</p>

<h2 id="3-conexión-a-internet">3. Conexión a Internet</h2>

<p>Para que un cuaderno de <em>Colab</em> se ejecute, debes estar conectado a internet. Si tienes mala cobertura WiFi, es posible que la ejecución se pare porque el servidor interpreta que te has desconectado, por eso es mejor que conectes el ordenador al router usando un cable y apagues la tarjeta WiFi del ordenador.</p>

<h2 id="4-mostrar-gráficas">4. Mostrar Gráficas</h2>

<p>Mostrar gráficas en <em>Colab</em> es útil, pero <strong>sólo se mostrarán cuando la ejecución de la celda correspondiente termine</strong>. Si usas una celda que tarda 12 horas en ejecutarse, como yo, no verás las gráficas hasta que pase ese tiempo, o peor aún, es posible que se acumulen tantas gráficas, que la ejecución de la máquina virtual se pare porque has consumido toda la memoria RAM disponible. Además, cuando tienes más de 20 figuras abiertas aparece un <em>warning</em> bastante molesto en la salida de la ejecución.</p>

<p>Para evitar todo esto, lo mejor es que guardes las gráficas como imagen y luego las cierres, de este modo:</p>

<pre><code class="language-python">import matplotlib.pyplot as plt

def plot_learning_curve(training_values, validation_values, iteration, file_to_save):
    fig, axes = plt.subplots(constrained_layout=True, figsize=(13, 5))
    fig.suptitle('Learning Curve Model {}'.format(iteration))
    axes.set_ylabel('loss')
    axes.set_xlabel('epoch')
    axes.plot(training_values, label='train')
    axes.plot(validation_values, label='validation')
    axes.legend(loc='upper right')
    fig.savefig('{}.png'.format(file_to_save))
    plt.close('all')
</code></pre>

<h2 id="5-evitar-la-pérdida-de-datos-conectar-con-google-drive">5. Evitar la Pérdida de Datos: Conectar con Google Drive</h2>

<p>Una vez que la máquina virtual se desconecta, lo cual puede pasar por todo lo mencionado anteriormente, se pierden los archivos locales que hubieran en la misma, por eso es buena idea conectar el cuaderno con <em>Google Drive</em> e ir guardando todos los archivos generados en una carpeta. Esto también facilita la descarga de archivos, ya que en <em>Colab</em> no existe la opción de descargar varios archivos a la vez, se tienen que descargar de uno en uno.</p>

<p>Para conectar con <em>Drive</em>, basta con ejecutar el siguiente código:</p>

<pre><code class="language-python">from google.colab import drive
drive.mount('/content/drive')
</code></pre>

<p><br>
Esto generará un enlace que nos abrirá un cuadro de diálogo, donde seleccionaremos la cuenta de <em>Drive</em> a la que queremos conectarnos y generará una contraseña que se debe introducir en el cuaderno.</p>

<h2 id="6-carga-de-archivos-desde-google-drive">6. Carga de Archivos desde Google Drive</h2>

<p>Subir varios archivos a varias sesiones puede ser algo molesto ya que es una tarea repetitiva y que lleva tiempo, dependiendo de la cantidad de archivos y su tamaño. Las máquinas virtuales usan <em>Linux</em>, de modo que, para evitar esta demora, se pueden conectar las sesiones con <em>Google Drive</em>, copiar desde allí los archivos necesarios e importar las funciones después.</p>

<p>En cuanto a los ficheros de datos, se puede acceder directamente desde <em>Drive</em> sin necesidad de copiarlos, suponiendo que no vayan a sufrir modificaciones durante la ejecución del cuaderno.</p>

<p>Por ejemplo, si tenemos 3 ficheros fuente, se puede ahorrar tiempo de esta forma:</p>

<pre><code class="language-python">from google.colab import drive
drive.mount('/content/drive')
%cp &quot;/content/drive/My Drive/source/models.py&quot; .
%cp &quot;/content/drive/My Drive/source/trainer.py&quot; .
%cp &quot;/content/drive/My Drive/source/experiment.py&quot; .

from os import path
from experiment import Experiment
from models import create_2hidden_layers_model

G_DRIVE_DATA = '/content/drive/My Drive/source'
experiment = Experiment(model=create_2hidden_layers_model())
experiment.execute(file=path.join(G_DRIVE_DATA, 'file_1.csv'))
experiment.execute(file=path.join(G_DRIVE_DATA, 'file_2.csv'))
</code></pre>

<p><br>
El símbolo &ldquo;<strong><em>%</em></strong>&rdquo; significa que vamos a ejecutar un comando de <em>Linux</em> en lugar de código <em>Python</em>.</p>

    </section>
  </div>
  <div class="social-share">
    <h4>COMPARTE ESTE POST</h4>
    <a class="social-share-link twitter"
    onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;"
    href="https://twitter.com/intent/tweet?text=17%20d%c3%adas%20ejecutando%20Google%20Colab&amp;url=https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab&via=duardnaranjo">
    <i class="fab fa-twitter-square"></i>
</a>

<a class="social-share-link facebook"
    onclick="window.open(this.href, 'share-facebook', 'width=550,height=235');return false;"
    href="https://www.facebook.com/sharer/sharer.php?u=https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab">
    <i class="fab fa-facebook-square"></i>
</a>

<a class="social-share-link linkedin"
    onclick="window.open(this.href, 'share-linkedin', 'width=550,height=235');return false;"
    href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://www.theagilecrafter.com/blog/es/post/17-days-running-google-colab">
    <i class="fab fa-linkedin"></i>
</a>

  </div>
</article>
          </div>
        </div>
      </main>

      <aside class="read-next outer">
        <div class="inner">
          <div class="read-next-feed">
            
            
          </div>
        </div>
      </aside>


      <footer class="site-footer outer">
  <div class="site-footer-content inner">
    <section>
      <a href="https://www.theagilecrafter.com/blog/es"> Blog de Eduardo Ortega </a>
    </section>
    <section class="copyright" style="line-height: 1.3em; text-align: center;">
      <a href="https://www.theagilecrafter.com/blog/"></a>
      Copyright © 2020
      <br>
      
      <span style="font-size: 0.8em;">
        Customized
        <a href="https://www.telematika.org">EM</a>'s
        <a href="https://github.com/TryGhost/Casper">Casper 2.1.7</a>
        theme
      </span>
      
    </section>
    <nav class="footer-nav">
      <div class="social-media-links">
        
        <a class="social-link" href="https://github.com/Eduardo-Ortega102" target="_blank" rel="noopener"><i
            class="fab fa-github" aria-hidden="true"></i>
        </a>
        <span class="vertical-line"></span>
        
        
        <a class="social-link" href="https://www.linkedin.com/in/eortegan/es/" target="_blank"
          rel="noopener"><i class="fab fa-linkedin-in" aria-hidden="true"></i>
        </a>
        <span class="vertical-line"></span>
        
        
        <a class="social-link social-link-tw" href="https://twitter.com/duardnaranjo" target="_blank"
          rel="noopener"><i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
        
      </div>
    </nav>
  </div>
</footer>
    </div>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script type="text/javascript" src="//code.jquery.com/jquery-3.2.1.min.js"></script>

<script type="text/javascript" src="https://www.theagilecrafter.com/blog/js/jquery.fitvids.js"></script>

<script type="text/javascript" src="https://www.theagilecrafter.com/blog/js/progress-bar.js"></script>


<script>hljs.initHighlightingOnLoad();</script>

    
  </body>

  </html>